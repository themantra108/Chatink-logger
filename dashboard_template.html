<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chartink Pro</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/4.2.2/css/fixedColumns.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/fixedcolumns/4.2.2/js/dataTables.fixedColumns.min.js"></script>
    
    <style>
        /* Theme: Dark & Minimal */
        :root { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --accent: #bb86fc; --border: #333; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 10px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 10px; margin-bottom: 20px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        h3 { color: var(--accent); border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-top: 0; }
        .meta { text-align: center; color: #4db6ac; margin-bottom: 20px; font-weight: bold; font-size: 0.9rem; }
        
        /* DataTable Polish */
        table.dataTable thead th { background: #2c2c2c !important; color: #fff; position: sticky; top: 0; z-index: 100; border-bottom: 2px solid #555; }
        table.dataTable tbody tr td:first-child { position: sticky; left: 0; z-index: 50; border-right: 2px solid #444; font-weight: 500; }
        
        /* Striping Logic */
        table.dataTable tbody tr.even, table.dataTable tbody tr.even td:first-child { background: #1e1e1e !important; }
        table.dataTable tbody tr.odd, table.dataTable tbody tr.odd td:first-child { background: #2a2a2a !important; }
        
        /* Cells & Scrollbar */
        table.dataTable td { white-space: nowrap; max-width: 300px; overflow: hidden; text-overflow: ellipsis; padding: 6px 10px; border-bottom: 1px solid var(--border); }
        .dataTables_scrollBody { resize: vertical !important; border-bottom: 3px solid #444; min-height: 300px; }
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 5px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
    </style>
</head>
<body>
    <div style="text-align:center"><h1>ðŸ“Š Market Dashboard</h1><div class="meta">Updated: {{time}}</div></div>
    
    {{#tables}}
    <div class="card">
        <h3>{{title}}</h3>
        {{{content}}} 
    </div>
    <script>
        $(document).ready(() => {
            const id = '#{{id}}';
            if($(id).length) {
                try { 
                    $(id).DataTable({ 
                        paging: false, info: false, 
                        scrollX: true, scrollY: '50vh', scrollCollapse: true, 
                        fixedColumns: {left: 1}, stripeClasses: ['odd','even'] 
                    }); 
                } catch(e) { console.error("Table Init Failed", e); }
            }
        });
    </script>
    {{/tables}}
</body>
</html>
